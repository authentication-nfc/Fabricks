<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Fixed Viewer</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; background-color: #000; overflow-x: hidden; }
        .scrolling-wrapper {
            position: relative;
            width: 100%;
            max-width: 1500px;
            margin: 0 auto;
            height: 733.33vw; /* 1500x11000比率 */
            background: url('long-background.jpg') no-repeat top center;
            background-size: 100% auto;
        }
       /* 1. 外側の枠線の設定 */
#viewer-container {
    position: absolute;
    top: 19%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 90%;
    max-width: 2000px;
    height: auto;
    max-height: 80vh;
    aspect-ratio: auto;
    touch-action: pan-y;
    cursor: ew-resize;
    z-index: 10;

    /* ★水色の線を薄く変更 */
    border: 2px solid #94F6FC ; /* 透明感のある薄い水色に変更 */
    border-radius: 20px;
    box-sizing: border-box;
    overflow: hidden;

    display: flex;
    justify-content: center;
    align-items: center;
    /* ★枠内の背景もごく薄い水色に（不要なら削除してください） */
    background-color: rgb(148, 246, 252); 
}
        #product-image { width: 100%; height: 100%; object-fit: contain; pointer-events: none; }
        .fabricks-link { position: absolute; left: 42%; transform: translateX(-50%); z-index: 20; top: -0.25%; }
        .fabricks-link img { width: 160px; height: auto; border: none; }
        /* ここから追加：数字のデザイン */
        .overlay-number {
            position: absolute;
            top: 27px;         /* 上からの位置（自分で調整） */
            left: 20px;        /* 左からの位置（自分で調整） */
            z-index: 100;      /* 一番手前に配置 */
            pointer-events: none; /* 下の画像のドラッグを邪魔しない */
            
            font-family: Arial, sans-serif;
            font-size: 70px;
            font-weight: 100;
            line-height: 1;
            
            /* 外線フチ取りコマンド */
            color: transparent;
            -webkit-text-stroke: 1.5px #ffffff;
            opacity: 0.8;
        }
    </style>
    /* ここから追加 */
        .overlay-number {
            position: absolute;
            top: 5%;           /* 上からの位置（お好みで調整） */
            left: 5%;          /* 左からの位置（お好みで調整） */
            z-index: 25;       /* 他の要素より一番上にくるように設定 */
            pointer-events: none; /* 下の画像を触れるようにする */

            font-family: 'Arial Black', sans-serif; /* 太めのフォント */
            font-size: 100px;  /* 数字の大きさ */
            line-height: 1;
            
            /* 中を透明にして外枠だけにする */
            color: transparent;
            -webkit-text-stroke: 2px #ffffff; /* 白色のフチ。太さは2px */
        }
        /* ここまで追加 */
</head>
<body>
    <div class="scrolling-wrapper">
        <div id="viewer-container">
            <img id="product-image" src="image_01.jpg">
            <div class="overlay-number">7</div>
        </div>
        <div class="fabricks-link">
            <a href="https://fabricks.com/" target="_blank">
                <img src="button.png" alt="">
            </a>
        </div>
    </div>
    <script>
        const imgElement = document.getElementById('product-image');
        const images = [];
        for (let i = 1; i <= 18; i++) {
            const num = i.toString().padStart(2, '0');
            images.push(`image_${num}.jpg`);
            new Image().src = `image_${num}.jpg`;
        }
        let currentFrameIndex = 0, lastFrameIndex = 0, isDragging = false, startX = 0, lastX = 0, velocity = 0, rafId = null;
        const updateFrame = (offset) => {
            let relativePos = offset + (lastFrameIndex <= 9 ? lastFrameIndex : lastFrameIndex - 18);
            if (relativePos < -8) { relativePos = -8; velocity = 0; }
            if (relativePos > 9) { relativePos = 9; velocity = 0; }
            let finalFrame = relativePos >= 0 ? relativePos : 18 + relativePos;
            if (finalFrame !== currentFrameIndex) {
                imgElement.src = images[finalFrame];
                currentFrameIndex = finalFrame;
            }
        };
        const animateInertia = () => {
            if (!isDragging) {
                velocity *= 0.92;
                if (Math.abs(velocity) > 0.1) {
                    let nextRel = (currentFrameIndex <= 9 ? currentFrameIndex : currentFrameIndex - 18) + (velocity / 15);
                    if (nextRel < -8) nextRel = -8; if (nextRel > 9) nextRel = 9;
                    let nextFrame = Math.round(nextRel >= 0 ? nextRel : 18 + nextRel);
                    if (nextFrame !== currentFrameIndex) {
                        imgElement.src = images[nextFrame];
                        currentFrameIndex = nextFrame;
                    }
                    rafId = requestAnimationFrame(animateInertia);
                } else { lastFrameIndex = currentFrameIndex; }
            }
        };
        const start = (x) => { isDragging = true; startX = x; lastX = x; lastFrameIndex = currentFrameIndex; velocity = 0; cancelAnimationFrame(rafId); };
        const move = (x) => { if (!isDragging) return; velocity = x - lastX; lastX = x; updateFrame(Math.floor((x - startX) / 15)); };
        const end = () => { if (!isDragging) return; isDragging = false; lastFrameIndex = currentFrameIndex; animateInertia(); };
        const container = document.getElementById('viewer-container');
        container.addEventListener('mousedown', (e) => start(e.pageX));
        window.addEventListener('mousemove', (e) => move(e.pageX));
        window.addEventListener('mouseup', end);
        container.addEventListener('touchstart', (e) => start(e.touches[0].pageX), { passive: true });
        container.addEventListener('touchmove', (e) => move(e.touches[0].pageX), { passive: true });
        window.addEventListener('touchend', end);
    </script>
</body>
</html>
